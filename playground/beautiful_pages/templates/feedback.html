{% extends "base.html" %}

{% block title %}Feedback Form - Beautiful Forms{% endblock %}

{% block header_title %}Customer Feedback{% endblock %}
{% block header_subtitle %}Your opinion matters! Help us improve our products and services{% endblock %}

{% block content %}
{% if response_data %}
<div class="response-container">
    <h3><i class="fas fa-star"></i> Feedback Received!</h3>
    <p style="margin-bottom: 15px;">Thank you for your valuable feedback! Here's what you shared (capitalized for
        demonstration):</p>

    <div class="response-item">
        <strong>Customer Name:</strong> {{ response_data.customer_name }}
    </div>
    <div class="response-item">
        <strong>Email:</strong> {{ response_data.email }}
    </div>
    <div class="response-item">
        <strong>Product/Service:</strong> {{ response_data.product_service }}
    </div>
    <div class="response-item">
        <strong>Rating:</strong> {{ response_data.rating }}
    </div>
    <div class="response-item">
        <strong>Areas for Improvement:</strong> {{ response_data.improvement_areas }}
    </div>
    <div class="response-item">
        <strong>Additional Comments:</strong> {{ response_data.additional_comments }}
    </div>
    <div class="response-item">
        <strong>Contact Back:</strong> {{ response_data.contact_back }}
    </div>

    <div style="margin-top: 20px; text-align: center;">
        <button onclick="location.reload()" class="btn">
            <i class="fas fa-plus"></i> Submit More Feedback
        </button>
    </div>
</div>
{% else %}
<form method="post" action="/feedback" style="max-width: 600px; margin: 0 auto;">
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
        <div class="form-group" style="margin-bottom: 0;">
            <label for="customer_name">
                <i class="fas fa-user"></i> Your Name
            </label>
            <input type="text" id="customer_name" name="customer_name" class="form-control"
                placeholder="Enter your name" required>
        </div>
        <div class="form-group" style="margin-bottom: 0;">
            <label for="email">
                <i class="fas fa-envelope"></i> Email Address
            </label>
            <input type="email" id="email" name="email" class="form-control" placeholder="your.email@example.com"
                required>
        </div>
    </div>

    <div class="form-group">
        <label for="product_service">
            <i class="fas fa-shopping-cart"></i> Product or Service
        </label>
        <select id="product_service" name="product_service" class="form-control" required>
            <option value="">Select the product/service you're providing feedback for</option>
            <option value="Web Design Service">Web Design Service</option>
            <option value="Mobile App Development">Mobile App Development</option>
            <option value="E-commerce Platform">E-commerce Platform</option>
            <option value="Customer Support">Customer Support</option>
            <option value="Consulting Services">Consulting Services</option>
            <option value="Software Product">Software Product</option>
            <option value="Training Program">Training Program</option>
            <option value="Technical Documentation">Technical Documentation</option>
            <option value="Other">Other</option>
        </select>
    </div>

    <div class="form-group">
        <label>
            <i class="fas fa-star"></i> Overall Rating
        </label>
        <div class="rating-container" style="margin-top: 15px;">
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <div class="rating-option">
                    <input type="radio" id="rating1" name="rating" value="1 Star - Poor" required>
                    <label for="rating1" class="rating-label" data-rating="1">
                        <span class="rating-stars">⭐</span>
                        <span class="rating-text">Poor</span>
                    </label>
                </div>
                <div class="rating-option">
                    <input type="radio" id="rating2" name="rating" value="2 Stars - Fair" required>
                    <label for="rating2" class="rating-label" data-rating="2">
                        <span class="rating-stars">⭐⭐</span>
                        <span class="rating-text">Fair</span>
                    </label>
                </div>
                <div class="rating-option">
                    <input type="radio" id="rating3" name="rating" value="3 Stars - Good" required>
                    <label for="rating3" class="rating-label" data-rating="3">
                        <span class="rating-stars">⭐⭐⭐</span>
                        <span class="rating-text">Good</span>
                    </label>
                </div>
                <div class="rating-option">
                    <input type="radio" id="rating4" name="rating" value="4 Stars - Very Good" required>
                    <label for="rating4" class="rating-label" data-rating="4">
                        <span class="rating-stars">⭐⭐⭐⭐</span>
                        <span class="rating-text">Very Good</span>
                    </label>
                </div>
                <div class="rating-option">
                    <input type="radio" id="rating5" name="rating" value="5 Stars - Excellent" required>
                    <label for="rating5" class="rating-label" data-rating="5">
                        <span class="rating-stars">⭐⭐⭐⭐⭐</span>
                        <span class="rating-text">Excellent</span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label for="improvement_areas">
            <i class="fas fa-tools"></i> Areas for Improvement
        </label>
        <textarea id="improvement_areas" name="improvement_areas" class="form-control"
            placeholder="What could we do better? What specific areas need improvement?" required></textarea>
    </div>

    <div class="form-group">
        <label for="additional_comments">
            <i class="fas fa-comment-dots"></i> Additional Comments
        </label>
        <textarea id="additional_comments" name="additional_comments" class="form-control"
            placeholder="Any other thoughts, suggestions, or comments you'd like to share..." required></textarea>
    </div>

    <div class="form-group">
        <div class="checkbox-group">
            <input type="checkbox" id="contact_back" name="contact_back" value="yes">
            <label for="contact_back" style="margin-bottom: 0; font-weight: normal;">
                <i class="fas fa-phone"></i> I would like someone to contact me about this feedback
            </label>
        </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <button type="submit" class="btn">
            <i class="fas fa-paper-plane"></i> Submit Feedback
        </button>
    </div>
</form>

<div
    style="margin-top: 40px; padding: 25px; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); border-radius: 15px;">
    <h3 style="color: #333; margin-bottom: 15px; text-align: center;">
        <i class="fas fa-heart"></i> Why Your Feedback Matters
    </h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div style="text-align: center;">
            <i class="fas fa-chart-line" style="color: #e91e63; font-size: 2rem; margin-bottom: 10px;"></i>
            <h4 style="color: #333;">Continuous Improvement</h4>
            <p style="color: #666; margin: 0;">Your feedback helps us identify areas where we can enhance our services
            </p>
        </div>
        <div style="text-align: center;">
            <i class="fas fa-users" style="color: #e91e63; font-size: 2rem; margin-bottom: 10px;"></i>
            <h4 style="color: #333;">Better Customer Experience</h4>
            <p style="color: #666; margin: 0;">We use your insights to create better experiences for all our customers
            </p>
        </div>
        <div style="text-align: center;">
            <i class="fas fa-lightbulb" style="color: #e91e63; font-size: 2rem; margin-bottom: 10px;"></i>
            <h4 style="color: #333;">Innovation</h4>
            <p style="color: #666; margin: 0;">Your suggestions inspire new features and improvements</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
    .rating-option {
        margin-bottom: 10px;
    }

    .rating-option input[type="radio"] {
        display: none;
    }

    .rating-label {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 15px 20px;
        border: 2px solid #e1e5e9;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: #fafbfc;
        min-width: 120px;
        text-align: center;
    }

    .rating-label:hover {
        border-color: #4facfe;
        background: rgba(79, 172, 254, 0.1);
        transform: translateY(-2px);
    }

    .rating-option input[type="radio"]:checked+.rating-label {
        border-color: #4facfe;
        background: rgba(79, 172, 254, 0.2);
        box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
    }

    .rating-stars {
        font-size: 1.5rem;
        margin-bottom: 5px;
        display: block;
    }

    .rating-text {
        font-size: 0.9rem;
        font-weight: 600;
        color: #333;
    }

    @media (max-width: 768px) {
        .rating-container>div {
            flex-direction: column;
            gap: 10px;
        }

        .rating-label {
            min-width: 100px;
            padding: 10px 15px;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form');
        if (form) {
            form.addEventListener('submit', function (e) {
                const btn = form.querySelector('.btn');
                if (btn) {
                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting Feedback...';
                    btn.disabled = true;
                }
            });
        }

        // Add interactive effects to rating system
        const ratingLabels = document.querySelectorAll('.rating-label');
        ratingLabels.forEach(label => {
            label.addEventListener('mouseenter', function () {
                const rating = parseInt(this.dataset.rating);
                // Highlight all stars up to this rating
                for (let i = 1; i <= 5; i++) {
                    const currentLabel = document.querySelector(`[data-rating="${i}"]`);
                    if (i <= rating) {
                        currentLabel.style.background = 'rgba(79, 172, 254, 0.15)';
                    } else {
                        currentLabel.style.background = '#fafbfc';
                    }
                }
            });

            label.addEventListener('mouseleave', function () {
                // Reset all backgrounds unless checked
                ratingLabels.forEach(l => {
                    const radio = document.querySelector(`#rating${l.dataset.rating}`);
                    if (!radio.checked) {
                        l.style.background = '#fafbfc';
                    }
                });
            });
        });
    });
</script>
{% endblock %}