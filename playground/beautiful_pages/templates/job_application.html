{% extends "base.html" %}

{% block title %}Job Application - Beautiful Forms{% endblock %}

{% block header_title %}Job Application{% endblock %}
{% block header_subtitle %}Apply for your dream job with our comprehensive application form{% endblock %}

{% block content %}
{% if response_data %}
<div class="response-container">
    <h3><i class="fas fa-briefcase"></i> Application Submitted Successfully!</h3>
    <p style="margin-bottom: 15px;">Thank you for your application! Here's what we received (capitalized for
        demonstration):</p>

    <div class="response-item">
        <strong>Full Name:</strong> {{ response_data.full_name }}
    </div>
    <div class="response-item">
        <strong>Email:</strong> {{ response_data.email }}
    </div>
    <div class="response-item">
        <strong>Phone:</strong> {{ response_data.phone }}
    </div>
    <div class="response-item">
        <strong>Position Applied For:</strong> {{ response_data.position }}
    </div>
    <div class="response-item">
        <strong>Years of Experience:</strong> {{ response_data.experience_years }}
    </div>
    <div class="response-item">
        <strong>Salary Expectation:</strong> {{ response_data.salary_expectation }}
    </div>
    <div class="response-item">
        <strong>Availability:</strong> {{ response_data.availability }}
    </div>
    <div class="response-item">
        <strong>Cover Letter:</strong> {{ response_data.cover_letter }}
    </div>

    <div style="margin-top: 20px; text-align: center;">
        <button onclick="location.reload()" class="btn">
            <i class="fas fa-plus"></i> Submit Another Application
        </button>
    </div>
</div>
{% else %}
<form method="post" action="/job-application" style="max-width: 700px; margin: 0 auto;">
    <div class="form-group">
        <label for="full_name">
            <i class="fas fa-user"></i> Full Name
        </label>
        <input type="text" id="full_name" name="full_name" class="form-control" placeholder="Enter your full legal name"
            required>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
        <div class="form-group" style="margin-bottom: 0;">
            <label for="email">
                <i class="fas fa-envelope"></i> Email Address
            </label>
            <input type="email" id="email" name="email" class="form-control" placeholder="your.email@example.com"
                required>
        </div>
        <div class="form-group" style="margin-bottom: 0;">
            <label for="phone">
                <i class="fas fa-phone"></i> Phone Number
            </label>
            <input type="tel" id="phone" name="phone" class="form-control" placeholder="+1 (555) 123-4567" required>
        </div>
    </div>

    <div class="form-group">
        <label for="position">
            <i class="fas fa-briefcase"></i> Position Applied For
        </label>
        <select id="position" name="position" class="form-control" required>
            <option value="">Select the position you're applying for</option>
            <option value="Frontend Developer">Frontend Developer</option>
            <option value="Backend Developer">Backend Developer</option>
            <option value="Full Stack Developer">Full Stack Developer</option>
            <option value="UI/UX Designer">UI/UX Designer</option>
            <option value="Product Manager">Product Manager</option>
            <option value="Data Scientist">Data Scientist</option>
            <option value="DevOps Engineer">DevOps Engineer</option>
            <option value="Marketing Manager">Marketing Manager</option>
            <option value="Sales Representative">Sales Representative</option>
            <option value="Customer Support">Customer Support</option>
            <option value="Other">Other</option>
        </select>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
        <div class="form-group" style="margin-bottom: 0;">
            <label for="experience_years">
                <i class="fas fa-calendar-alt"></i> Years of Experience
            </label>
            <select id="experience_years" name="experience_years" class="form-control" required>
                <option value="">Select experience level</option>
                <option value="0-1 years">0-1 years (Entry Level)</option>
                <option value="2-3 years">2-3 years</option>
                <option value="4-5 years">4-5 years</option>
                <option value="6-8 years">6-8 years</option>
                <option value="9-12 years">9-12 years</option>
                <option value="13+ years">13+ years (Senior Level)</option>
            </select>
        </div>
        <div class="form-group" style="margin-bottom: 0;">
            <label for="salary_expectation">
                <i class="fas fa-dollar-sign"></i> Salary Expectation
            </label>
            <select id="salary_expectation" name="salary_expectation" class="form-control" required>
                <option value="">Select salary range</option>
                <option value="$30,000 - $40,000">$30,000 - $40,000</option>
                <option value="$40,000 - $60,000">$40,000 - $60,000</option>
                <option value="$60,000 - $80,000">$60,000 - $80,000</option>
                <option value="$80,000 - $100,000">$80,000 - $100,000</option>
                <option value="$100,000 - $120,000">$100,000 - $120,000</option>
                <option value="$120,000+">$120,000+</option>
                <option value="Negotiable">Negotiable</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label for="availability">
            <i class="fas fa-clock"></i> Availability
        </label>
        <select id="availability" name="availability" class="form-control" required>
            <option value="">When can you start?</option>
            <option value="Immediately">Immediately</option>
            <option value="1 week">1 week</option>
            <option value="2 weeks">2 weeks</option>
            <option value="1 month">1 month</option>
            <option value="2-3 months">2-3 months</option>
            <option value="Other">Other (please specify in cover letter)</option>
        </select>
    </div>

    <div class="form-group">
        <label for="cover_letter">
            <i class="fas fa-file-alt"></i> Cover Letter
        </label>
        <textarea id="cover_letter" name="cover_letter" class="form-control"
            placeholder="Tell us about yourself, your experience, and why you're interested in this position..."
            required style="min-height: 150px;"></textarea>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <button type="submit" class="btn">
            <i class="fas fa-paper-plane"></i> Submit Application
        </button>
    </div>
</form>

<div
    style="margin-top: 40px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
    <h3 style="margin-bottom: 15px; text-align: center;">
        <i class="fas fa-info-circle"></i> Application Process
    </h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
        <div style="text-align: center;">
            <i class="fas fa-paper-plane" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.9;"></i>
            <h4>1. Submit</h4>
            <p style="opacity: 0.9; margin: 0;">Complete and submit your application</p>
        </div>
        <div style="text-align: center;">
            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.9;"></i>
            <h4>2. Review</h4>
            <p style="opacity: 0.9; margin: 0;">Our team will review your application</p>
        </div>
        <div style="text-align: center;">
            <i class="fas fa-comments" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.9;"></i>
            <h4>3. Interview</h4>
            <p style="opacity: 0.9; margin: 0;">Phone/video interview if selected</p>
        </div>
        <div style="text-align: center;">
            <i class="fas fa-handshake" style="font-size: 2rem; margin-bottom: 10px; opacity: 0.9;"></i>
            <h4>4. Decision</h4>
            <p style="opacity: 0.9; margin: 0;">Final decision and job offer</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form');
        if (form) {
            form.addEventListener('submit', function (e) {
                const btn = form.querySelector('.btn');
                if (btn) {
                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting Application...';
                    btn.disabled = true;
                }
            });
        }

        // Character counter for cover letter
        const coverLetter = document.getElementById('cover_letter');
        if (coverLetter) {
            const counter = document.createElement('div');
            counter.style.textAlign = 'right';
            counter.style.color = '#666';
            counter.style.fontSize = '0.9rem';
            counter.style.marginTop = '5px';
            coverLetter.parentElement.appendChild(counter);

            function updateCounter() {
                const length = coverLetter.value.length;
                counter.textContent = `${length} characters`;
                if (length < 50) {
                    counter.style.color = '#e74c3c';
                } else if (length < 100) {
                    counter.style.color = '#f39c12';
                } else {
                    counter.style.color = '#27ae60';
                }
            }

            coverLetter.addEventListener('input', updateCounter);
            updateCounter();
        }
    });
</script>
{% endblock %}